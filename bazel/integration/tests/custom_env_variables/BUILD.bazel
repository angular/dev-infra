load("//bazel/integration:index.bzl", "integration_test")

integration_test(
    name = "test",
    srcs = [
        "test.js",
    ],
    commands = [
        "node ./test.js",
    ],
    data = ["@devinfra//bazel:node_modules/semver/dir"],
    environment = {
        "CUSTOM_VAR": "yes!",
        "RESOLVED_BIN": "$(rootpath @devinfra//bazel:node_modules/semver/dir)/package.json",
        "MANUAL_ROOT_PATH": "../bazel/node_modules/semver/package.json",
        "BAZELISK_HOME": "<TMP>",
        "BAZELISK_HOME_2": "<TMP>",
    },
    tool_mappings = {
        "@nodejs_toolchains//:resolved_toolchain": "node",
    },
)
