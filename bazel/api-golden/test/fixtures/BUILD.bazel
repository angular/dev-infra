load("@aspect_bazel_lib//lib:copy_to_bin.bzl", "copy_to_bin")
load("@aspect_rules_ts//ts:defs.bzl", "ts_project")

package(default_visibility = ["//bazel/api-golden/test:__pkg__"])

copy_to_bin(
    name = "test_package_fixture",
    srcs = glob(["test_package/**"]),
)

copy_to_bin(
    name = "pkg_no_exports_field_fixture",
    srcs = glob(["pkg_no_exports_field/**"]),
)

ts_project(
    name = "test_lib",
    testonly = True,
    srcs = ["test_fixture.ts"],
    declaration = True,
    tsconfig = "//bazel:tsconfig",
    deps = [
        "//bazel:node_modules/@types/babel__core",
        "//bazel:node_modules/@types/node",
        "//bazel/api-golden/test/fixtures/transitive_target",
    ],
)
